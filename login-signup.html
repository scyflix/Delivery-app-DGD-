<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="favicons/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="favicons/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="favicons/favicon-16x16.png"
    />
    <link rel="manifest" href="favicons/site.webmanifest" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login/Signup to DGD</title>
    <link rel="stylesheet" href="login-signup.css" />
  </head>
  <body>
    <!-- LOGIN FORM -->
    <form id="loginForm">
      <h1>Login</h1>
      <p id="errormsg"></p>
      <fieldset>
        <legend>
          <label for="email">Email</label>
        </legend>
        <input type="email" id="email" />
      </fieldset>
      <fieldset>
        <legend>
          <label for="password">Password</label>
        </legend>
        <input type="password" id="password" />
      </fieldset>
      <button type="submit">Login</button>

      <button class="google-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
          <path
            fill="#FFC107"
            d="M43.6 20.4h-1.9V20H24v8h11.3C33.9 32.9 29.3 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 5.9 1.2 8 3.1l6-6C34.5 5.2 29.5 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21c10.5 0 20-7.6 20-21 0-1.2-.1-2.4-.4-3.6z"
          />
          <path
            fill="#FF3D00"
            d="M6.3 14.7l6.6 4.8C14.3 16.1 18.8 13 24 13c3.1 0 5.9 1.2 8 3.1l6-6C34.5 5.2 29.5 3 24 3 15.6 3 8.4 8.2 6.3 14.7z"
          />
          <path
            fill="#4CAF50"
            d="M24 45c5.3 0 10.3-2 14-5.2l-6.5-5.3C29.8 36.8 27 38 24 38c-5.3 0-9.9-3.1-11.7-7.5l-6.6 5.1C8.4 39.8 15.6 45 24 45z"
          />
          <path
            fill="#1976D2"
            d="M43.6 20.4h-1.9V20H24v8h11.3c-1.3 3.4-4.4 6-8.3 6-5.3 0-9.9-3.1-11.7-7.5l-6.6 5.1C11.1 39.8 17.3 45 24 45c10.5 0 20-7.6 20-21 0-1.2-.1-2.4-.4-3.6z"
          />
        </svg>
        Login with Google
      </button>
      <p>
        Don`t have an account? <a href="#" onclick="showSignup()">Signup</a>
      </p>
    </form>

    <!-- SIGNUP FORM -->
    <form id="signupForm">
      <h1>Signup</h1>
      <fieldset>
        <legend>
          <label for="fullName">Name</label>
        </legend>
        <input type="text" id="fullName" />
      </fieldset>
      <fieldset>
        <legend>
          <label for="signupEmail">Email</label>
        </legend>
        <input type="email" id="signupEmail" />
      </fieldset>
      <fieldset>
        <legend>
          <label for="signupPassword">Password</label>
        </legend>
        <input type="password" id="signupPassword" />
      </fieldset>
      <fieldset>
        <legend>
          <label for="signupConfirmPassword">Confirm Password</label>
        </legend>
        <input type="password" id="signupConfirmPassword" />
      </fieldset>
      <button type="submit">Signup</button>

      <button class="google-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
          <path
            fill="#FFC107"
            d="M43.6 20.4h-1.9V20H24v8h11.3C33.9 32.9 29.3 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 5.9 1.2 8 3.1l6-6C34.5 5.2 29.5 3 24 3 12.4 3 3 12.4 3 24s9.4 21 21 21c10.5 0 20-7.6 20-21 0-1.2-.1-2.4-.4-3.6z"
          />
          <path
            fill="#FF3D00"
            d="M6.3 14.7l6.6 4.8C14.3 16.1 18.8 13 24 13c3.1 0 5.9 1.2 8 3.1l6-6C34.5 5.2 29.5 3 24 3 15.6 3 8.4 8.2 6.3 14.7z"
          />
          <path
            fill="#4CAF50"
            d="M24 45c5.3 0 10.3-2 14-5.2l-6.5-5.3C29.8 36.8 27 38 24 38c-5.3 0-9.9-3.1-11.7-7.5l-6.6 5.1C8.4 39.8 15.6 45 24 45z"
          />
          <path
            fill="#1976D2"
            d="M43.6 20.4h-1.9V20H24v8h11.3c-1.3 3.4-4.4 6-8.3 6-5.3 0-9.9-3.1-11.7-7.5l-6.6 5.1C11.1 39.8 17.3 45 24 45c10.5 0 20-7.6 20-21 0-1.2-.1-2.4-.4-3.6z"
          />
        </svg>
        Signup with Google
      </button>
      <p>
        Already have an account? <a href="#" onclick="showLogin()">Login</a>
      </p>
    </form>
    <script>
      //Select forms
      const loginForm = document.getElementById("loginForm");
      const signupForm = document.getElementById("signupForm");
      //determine what happens after button click
      signupForm.addEventListener("submit", function (event) {
        event.preventDefault();
        //get signup form input
        const fullName = document.getElementById("fullName").value.trim();
        const signupEmail = document.getElementById("signupEmail").value.trim();
        const signupPassword = document
          .getElementById("signupPassword")
          .value.trim();
        const signupConfirmPassword = document
          .getElementById("signupConfirmPassword")
          .value.trim();
        //Validate
        if (
          !fullName ||
          !signupEmail ||
          !signupPassword ||
          !signupConfirmPassword
        ) {
          alert("please fill the form");
          return;
        } else if (signupPassword !== signupConfirmPassword) {
          alert("Your confirm password does not match");
          return;
        }
        //create user data
        const user = {
          fullName,
          email: signupEmail,
          password: signupPassword,
        };
        localStorage.setItem("user", JSON.stringify(user));
        window.location.href = "landing.html";
      });
      //check login info
      loginForm.addEventListener("submit", function (event) {
        event.preventDefault();
        //get login form input
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();
        //get data from local storage
        const userData = JSON.parse(localStorage.getItem("user"));

        const errormsg = document.getElementById("errormsg");
        //login confirmation
        if (!userData) {
          errormsg.style.color = "red";
          errormsg.innerText = "Please signup first";
          return;
        } else if (!email || !password) {
          errormsg.style.color = "red";
          errormsg.innerText = "Please fill the form";
          return;
        } else if (email !== userData.email) {
          errormsg.style.color = "red";
          errormsg.innerText = "Email is wrong";
          return;
        } else if (password !== userData.password) {
          errormsg.style.color = "red";
          errormsg.innerText = "Password is wrong";
          return;
        } else {
          errormsg.style.color = "green";
          errormsg.innerText = "Welcome back";
          setTimeout(() => {
            window.location.href = "roleSelection.html";
          }, 2000);
          return;
        }
      });

      function showSignup() {
        signupForm.style.display = "flex";
        loginForm.style.display = "none";
      }
      function showLogin() {
        signupForm.style.display = "none";
        loginForm.style.display = "flex";
      }
    </script>
  </body>
</html>
